import{j as C}from"./index-VS4hTV8j.js";import{b as u,e as h,d as zt}from"./vendor-C5zIUBfc.js";import{b as qt}from"./react-paginate-8Es1ox29.js";function $t({title:e,titleId:t,...a},r){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},a),e?u.createElement("title",{id:t},e):null,u.createElement("path",{d:"M9.25 13.25a.75.75 0 0 0 1.5 0V4.636l2.955 3.129a.75.75 0 0 0 1.09-1.03l-4.25-4.5a.75.75 0 0 0-1.09 0l-4.25 4.5a.75.75 0 1 0 1.09 1.03L9.25 4.636v8.614Z"}),u.createElement("path",{d:"M3.5 12.75a.75.75 0 0 0-1.5 0v2.5A2.75 2.75 0 0 0 4.75 18h10.5A2.75 2.75 0 0 0 18 15.25v-2.5a.75.75 0 0 0-1.5 0v2.5c0 .69-.56 1.25-1.25 1.25H4.75c-.69 0-1.25-.56-1.25-1.25v-2.5Z"}))}const Gt=u.forwardRef($t),A=[];for(let e=0;e<256;++e)A.push((e+256).toString(16).slice(1));function Kt(e,t=0){return(A[e[t+0]]+A[e[t+1]]+A[e[t+2]]+A[e[t+3]]+"-"+A[e[t+4]]+A[e[t+5]]+"-"+A[e[t+6]]+A[e[t+7]]+"-"+A[e[t+8]]+A[e[t+9]]+"-"+A[e[t+10]]+A[e[t+11]]+A[e[t+12]]+A[e[t+13]]+A[e[t+14]]+A[e[t+15]]).toLowerCase()}let jt;const Zt=new Uint8Array(16);function Jt(){if(!jt){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");jt=crypto.getRandomValues.bind(crypto)}return jt(Zt)}const Qt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Lt={randomUUID:Qt};function en(e,t,a){if(Lt.randomUUID&&!e)return Lt.randomUUID();e=e||{};const r=e.random??e.rng?.()??Jt();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Kt(r)}function I(){return I=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},I.apply(null,arguments)}function kt(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;a[r]=e[r]}return a}function Fe(e){var t=u.useRef({fn:e,curr:void 0}).current;if(t.fn=e,!t.curr){var a=Object.create(null);Object.keys(e).forEach(function(r){a[r]=function(){var o;return(o=t.fn[r]).call.apply(o,[t.fn].concat([].slice.call(arguments)))}}),t.curr=a}return t.curr}function Pt(e){return u.useReducer(function(t,a){return I({},t,typeof a=="function"?a(t):a)},e)}var Ht=u.createContext(void 0),Wt="cubic-bezier(0.25, 0.8, 0.25, 1)",Qe=20,xe=typeof window<"u"&&"ontouchstart"in window,Yt=function(e,t,a){return Math.max(Math.min(e,a),t)},Rt=function(e,t,a){return t===void 0&&(t=0),a===void 0&&(a=0),Yt(e,1*(1-a),Math.max(6,t)*(1+a))},At=typeof window>"u"||/ServerSideRendering/.test(navigator&&navigator.userAgent)?u.useEffect:u.useLayoutEffect;function et(e,t,a){var r=u.useRef(t);r.current=t,u.useEffect(function(){function o(c){r.current(c)}return e&&window.addEventListener(e,o,a),function(){e&&window.removeEventListener(e,o)}},[e])}var tn=["container"];function nn(e){var t=e.container,a=t===void 0?document.body:t,r=kt(e,tn);return zt.createPortal(h.createElement("div",I({},r)),a)}function rn(e){return h.createElement("svg",I({width:"44",height:"44",viewBox:"0 0 768 768"},e),h.createElement("path",{d:"M607.5 205.5l-178.5 178.5 178.5 178.5-45 45-178.5-178.5-178.5 178.5-45-45 178.5-178.5-178.5-178.5 45-45 178.5 178.5 178.5-178.5z"}))}function an(e){return h.createElement("svg",I({width:"44",height:"44",viewBox:"0 0 768 768"},e),h.createElement("path",{d:"M640.5 352.5v63h-390l178.5 180-45 45-256.5-256.5 256.5-256.5 45 45-178.5 180h390z"}))}function on(e){return h.createElement("svg",I({width:"44",height:"44",viewBox:"0 0 768 768"},e),h.createElement("path",{d:"M384 127.5l256.5 256.5-256.5 256.5-45-45 178.5-180h-390v-63h390l-178.5-180z"}))}function cn(){return u.useEffect(function(){var e=document.body.style,t=e.overflow;return e.overflow="hidden",function(){e.overflow=t}},[]),null}function Dt(e){var t=e.touches[0],a=t.clientX,r=t.clientY;if(e.touches.length>=2){var o=e.touches[1],c=o.clientX,i=o.clientY;return[(a+c)/2,(r+i)/2,Math.sqrt(Math.pow(c-a,2)+Math.pow(i-r,2))]}return[a,r,0]}var Ie=function(e,t,a,r){var o,c=a*t,i=(c-r)/2,d=e;return c<=r?(o=1,d=0):e>0&&i-e<=0?(o=2,d=i):e<0&&i+e<=0&&(o=3,d=-i),[o,d]};function _t(e,t,a,r,o,c,i,d,m,v){i===void 0&&(i=innerWidth/2),d===void 0&&(d=innerHeight/2),m===void 0&&(m=0),v===void 0&&(v=0);var g=Ie(e,c,a,innerWidth)[0],p=Ie(t,c,r,innerHeight),P=innerWidth/2,k=innerHeight/2;return{x:i-c/o*(i-(P+e))-P+(r/a>=3&&a*c===innerWidth?0:g?m/2:m),y:d-c/o*(d-(k+t))-k+(p[0]?v/2:v),lastCX:i,lastCY:d}}function St(e,t,a){var r=e%180!=0;return r?[a,t,r]:[t,a,r]}function It(e,t,a){var r=St(a,innerWidth,innerHeight),o=r[0],c=r[1],i=0,d=o,m=c,v=e/t*c,g=t/e*o;return e<o&&t<c?(d=e,m=t):e<o&&t>=c?d=v:e>=o&&t<c||e/t>o/c?m=g:t/e>=3&&!r[2]?i=((m=g)-c)/2:d=v,{width:d,height:m,x:0,y:i,pause:!0}}function Nt(e,t){var a=t.leading,r=a!==void 0&&a,o=t.maxWait,c=t.wait,i=c===void 0?o||0:c,d=u.useRef(e);d.current=e;var m=u.useRef(0),v=u.useRef(),g=function(){return v.current&&clearTimeout(v.current)},p=u.useCallback(function(){var P=[].slice.call(arguments),k=Date.now();function X(){m.current=k,g(),d.current.apply(null,P)}var E=m.current,l=k-E;if(E===0&&(r&&X(),m.current=k),o!==void 0){if(l>o)return void X()}else l<i&&(m.current=k);g(),v.current=setTimeout(function(){X(),m.current=0},i)},[i,o,r]);return p.cancel=g,p}var Ft=function(e,t,a){return De(e,t,a,100,function(r){return r},function(){return De(t,e,a)})},sn=function(e){return 1-Math.pow(1-e,4)};function De(e,t,a,r,o,c){r===void 0&&(r=400),o===void 0&&(o=sn);var i=t-e;if(i!==0){var d=Date.now(),m=0,v=function(){var p=Math.min(1,(Date.now()-d)/r);a(e+o(p)*i)&&p<1?g():(cancelAnimationFrame(m),p>=1&&c&&c())};g()}function g(){m=requestAnimationFrame(v)}}var ln={T:0,L:0,W:0,H:0,FIT:void 0},Ot=function(){var e=u.useRef(!1);return u.useEffect(function(){return e.current=!0,function(){e.current=!1}},[]),e},un=["className"];function dn(e){var t=e.className,a=t===void 0?"":t,r=kt(e,un);return h.createElement("div",I({className:"PhotoView__Spinner "+a},r),h.createElement("svg",{viewBox:"0 0 32 32",width:"36",height:"36",fill:"white"},h.createElement("path",{opacity:".25",d:"M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4"}),h.createElement("path",{d:"M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z"})))}var fn=["src","loaded","broken","className","onPhotoLoad","loadingElement","brokenElement"];function vn(e){var t=e.src,a=e.loaded,r=e.broken,o=e.className,c=e.onPhotoLoad,i=e.loadingElement,d=e.brokenElement,m=kt(e,fn),v=Ot();return t&&!r?h.createElement(h.Fragment,null,h.createElement("img",I({className:"PhotoView__Photo"+(o?" "+o:""),src:t,onLoad:function(g){var p=g.target;v.current&&c({loaded:!0,naturalWidth:p.naturalWidth,naturalHeight:p.naturalHeight})},onError:function(){v.current&&c({broken:!0})},draggable:!1,alt:""},m)),!a&&(i?h.createElement("span",{className:"PhotoView__icon"},i):h.createElement(dn,{className:"PhotoView__icon"}))):d?h.createElement("span",{className:"PhotoView__icon"},typeof d=="function"?d({src:t}):d):null}var hn={naturalWidth:void 0,naturalHeight:void 0,width:void 0,height:void 0,loaded:void 0,broken:!1,x:0,y:0,touched:!1,maskTouched:!1,rotate:0,scale:1,CX:0,CY:0,lastX:0,lastY:0,lastCX:0,lastCY:0,lastScale:1,touchTime:0,touchLength:0,pause:!0,stopRaf:!0,reach:void 0};function mn(e){var t=e.item,a=t.src,r=t.render,o=t.width,c=o===void 0?0:o,i=t.height,d=i===void 0?0:i,m=t.originRef,v=e.visible,g=e.speed,p=e.easing,P=e.wrapClassName,k=e.className,X=e.style,E=e.loadingElement,l=e.brokenElement,y=e.onPhotoTap,j=e.onMaskTap,Ue=e.onReachMove,ye=e.onReachUp,ee=e.onPhotoResize,U=e.isActive,be=e.expose,dt=Pt(hn),x=dt[0],N=dt[1],He=u.useRef(0),Oe=Ot(),ft=x.naturalWidth,ce=ft===void 0?c:ft,S=x.naturalHeight,T=S===void 0?d:S,tt=x.width,$=tt===void 0?c:tt,vt=x.height,Ce=vt===void 0?d:vt,nt=x.loaded,rt=nt===void 0?!a:nt,Ye=x.broken,H=x.x,se=x.y,G=x.touched,Mt=x.stopRaf,Ee=x.maskTouched,K=x.rotate,Y=x.scale,ht=x.CX,Be=x.CY,Ae=x.lastX,at=x.lastY,R=x.lastCX,mt=x.lastCY,te=x.lastScale,Se=x.touchTime,gt=x.touchLength,Z=x.pause,Xe=x.reach,ot=Fe({onScale:function(n){return le(Rt(n))},onRotate:function(n){K!==n&&(be({rotate:n}),N(I({rotate:n},It(ce,T,n))))}});function le(n,s,w){Y!==n&&(be({scale:n}),N(I({scale:n},_t(H,se,$,Ce,Y,n,s,w),n<=1&&{x:0,y:0})))}var pt=Nt(function(n,s,w){if(w===void 0&&(w=0),(G||Ee)&&U){var ue=St(K,$,Ce),de=ue[0],O=ue[1];if(w===0&&He.current===0){var D=Math.abs(n-ht)<=20,F=Math.abs(s-Be)<=20;if(D&&F)return void N({lastCX:n,lastCY:s});He.current=D?s>Be?3:2:1}var ae,Te=n-R,Pe=s-mt;if(w===0){var Ve=Ie(Te+Ae,Y,de,innerWidth)[0],$e=Ie(Pe+at,Y,O,innerHeight);ae=function(ke,ve,he,oe){return ve&&ke===1||oe==="x"?"x":he&&ke>1||oe==="y"?"y":void 0}(He.current,Ve,$e[0],Xe),ae!==void 0&&Ue(ae,n,s,Y)}if(ae==="x"||Ee)return void N({reach:"x"});var fe=Rt(Y+(w-gt)/100/2*Y,ce/$,.2);be({scale:fe}),N(I({touchLength:w,reach:ae,scale:fe},_t(H,se,$,Ce,Y,fe,n,s,Te,Pe)))}},{maxWait:8});function it(n){return!Mt&&!G&&(Oe.current&&N(I({},n,{pause:v})),Oe.current)}var Re,ne,Ne,ct,wt,xt,yt,W,bt=(wt=function(n){return it({x:n})},xt=function(n){return it({y:n})},yt=function(n){return Oe.current&&(be({scale:n}),N({scale:n})),!G&&Oe.current},W=Fe({X:function(n){return wt(n)},Y:function(n){return xt(n)},S:function(n){return yt(n)}}),function(n,s,w,ue,de,O,D,F,ae,Te,Pe){var Ve=St(Te,de,O),$e=Ve[0],fe=Ve[1],ke=Ie(n,F,$e,innerWidth),ve=ke[0],he=ke[1],oe=Ie(s,F,fe,innerHeight),Ge=oe[0],Et=oe[1],Ke=Date.now()-Pe;if(Ke>=200||F!==D||Math.abs(ae-D)>1){var Me=_t(n,s,de,O,D,F),me=Me.x,Le=Me.y,B=ve?he:me!==n?me:null,Ze=Ge?Et:Le!==s?Le:null;return B!==null&&De(n,B,W.X),Ze!==null&&De(s,Ze,W.Y),void(F!==D&&De(D,F,W.S))}var We=(n-w)/Ke,je=(s-ue)/Ke,_e=Math.sqrt(Math.pow(We,2)+Math.pow(je,2)),ge=!1,pe=!1;(function(J,V){var L,Q=J,we=0,z=0,Je=function(lt){L||(L=lt);var ut=lt-L,Xt=Math.sign(J),Tt=-.001*Xt,Vt=Math.sign(-Q)*Math.pow(Q,2)*2e-4,Bt=Q*ut+(Tt+Vt)*Math.pow(ut,2)/2;we+=Bt,L=lt,Xt*(Q+=(Tt+Vt)*ut)<=0?q():V(we)?ie():q()};function ie(){z=requestAnimationFrame(Je)}function q(){cancelAnimationFrame(z)}ie()})(_e,function(J){var V=n+J*(We/_e),L=s+J*(je/_e),Q=Ie(V,D,$e,innerWidth),we=Q[0],z=Q[1],Je=Ie(L,D,fe,innerHeight),ie=Je[0],q=Je[1];if(we&&!ge&&(ge=!0,ve?De(V,z,W.X):Ft(z,V+(V-z),W.X)),ie&&!pe&&(pe=!0,Ge?De(L,q,W.Y):Ft(q,L+(L-q),W.Y)),ge&&pe)return!1;var lt=ge||W.X(z),ut=pe||W.Y(q);return lt&&ut})}),ze=(Re=y,ne=function(n,s){Xe||le(Y!==1?1:Math.max(2,ce/$),n,s)},Ne=u.useRef(0),ct=Nt(function(){Ne.current=0,Re.apply(void 0,[].slice.call(arguments))},{wait:300}),function(){var n=[].slice.call(arguments);Ne.current+=1,ct.apply(void 0,n),Ne.current>=2&&(ct.cancel(),Ne.current=0,ne.apply(void 0,n))});function qe(n,s){if(He.current=0,(G||Ee)&&U){N({touched:!1,maskTouched:!1,pause:!1,stopRaf:!1,reach:void 0});var w=Rt(Y,ce/$);if(bt(H,se,Ae,at,$,Ce,Y,w,te,K,Se),ye(n,s),ht===n&&Be===s){if(G)return void ze(n,s);Ee&&j(n,s)}}}function st(n,s,w){w===void 0&&(w=0),N({touched:!0,CX:n,CY:s,lastCX:n,lastCY:s,lastX:H,lastY:se,lastScale:Y,touchLength:w,touchTime:Date.now()})}function Ct(n){N({maskTouched:!0,CX:n.clientX,CY:n.clientY,lastX:H,lastY:se})}et(xe?void 0:"mousemove",function(n){n.preventDefault(),pt(n.clientX,n.clientY)}),et(xe?void 0:"mouseup",function(n){qe(n.clientX,n.clientY)}),et(xe?"touchmove":void 0,function(n){n.preventDefault();var s=Dt(n);pt.apply(void 0,s)},{passive:!1}),et(xe?"touchend":void 0,function(n){var s=n.changedTouches[0];qe(s.clientX,s.clientY)},{passive:!1}),et("resize",Nt(function(){rt&&!G&&(N(It(ce,T,K)),ee())},{maxWait:8})),At(function(){U&&be(I({scale:Y,rotate:K},ot))},[U]);var re=function(n,s,w,ue,de,O,D,F,ae,Te){var Pe=function(me,Le,B,Ze,We){var je=u.useRef(!1),_e=Pt({lead:!0,scale:B}),ge=_e[0],pe=ge.lead,J=ge.scale,V=_e[1],L=Nt(function(Q){try{return We(!0),V({lead:!1,scale:Q}),Promise.resolve()}catch(we){return Promise.reject(we)}},{wait:Ze});return At(function(){je.current?(We(!1),V({lead:!0}),L(B)):je.current=!0},[B]),pe?[me*J,Le*J,B/J]:[me*B,Le*B,1]}(O,D,F,ae,Te),Ve=Pe[0],$e=Pe[1],fe=Pe[2],ke=function(me,Le,B,Ze,We){var je=u.useState(ln),_e=je[0],ge=je[1],pe=u.useState(0),J=pe[0],V=pe[1],L=u.useRef(),Q=Fe({OK:function(){return me&&V(4)}});function we(z){We(!1),V(z)}return u.useEffect(function(){if(L.current||(L.current=Date.now()),B){if(function(z,Je){var ie=z&&z.current;if(ie&&ie.nodeType===1){var q=ie.getBoundingClientRect();Je({T:q.top,L:q.left,W:q.width,H:q.height,FIT:ie.tagName==="IMG"?getComputedStyle(ie).objectFit:void 0})}}(Le,ge),me)return Date.now()-L.current<250?(V(1),requestAnimationFrame(function(){V(2),requestAnimationFrame(function(){return we(3)})}),void setTimeout(Q.OK,Ze)):void V(4);we(5)}},[me,B]),[J,_e]}(n,s,w,ae,Te),ve=ke[0],he=ke[1],oe=he.W,Ge=he.FIT,Et=innerWidth/2,Ke=innerHeight/2,Me=ve<3||ve>4;return[Me?oe?he.L:Et:ue+(Et-O*F/2),Me?oe?he.T:Ke:de+(Ke-D*F/2),Ve,Me&&Ge?Ve*(he.H/oe):$e,ve===0?fe:Me?oe/(O*F)||.01:fe,Me?Ge?1:0:1,ve,Ge]}(v,m,rt,H,se,$,Ce,Y,g,function(n){return N({pause:n})}),f=re[4],b=re[6],_="transform "+g+"ms "+p,M={className:k,onMouseDown:xe?void 0:function(n){n.stopPropagation(),n.button===0&&st(n.clientX,n.clientY,0)},onTouchStart:xe?function(n){n.stopPropagation(),st.apply(void 0,Dt(n))}:void 0,onWheel:function(n){if(!Xe){var s=Rt(Y-n.deltaY/100/2,ce/$);N({stopRaf:!0}),le(s,n.clientX,n.clientY)}},style:{width:re[2]+"px",height:re[3]+"px",opacity:re[5],objectFit:b===4?void 0:re[7],transform:K?"rotate("+K+"deg)":void 0,transition:b>2?_+", opacity "+g+"ms ease, height "+(b<4?g/2:b>4?g:0)+"ms "+p:void 0}};return h.createElement("div",{className:"PhotoView__PhotoWrap"+(P?" "+P:""),style:X,onMouseDown:!xe&&U?Ct:void 0,onTouchStart:xe&&U?function(n){return Ct(n.touches[0])}:void 0},h.createElement("div",{className:"PhotoView__PhotoBox",style:{transform:"matrix("+f+", 0, 0, "+f+", "+re[0]+", "+re[1]+")",transition:G||Z?void 0:_,willChange:U?"transform":void 0}},a?h.createElement(vn,I({src:a,loaded:rt,broken:Ye},M,{onPhotoLoad:function(n){N(I({},n,n.loaded&&It(n.naturalWidth||0,n.naturalHeight||0,K)))},loadingElement:E,brokenElement:l})):r&&r({attrs:M,scale:f,rotate:K})))}var Ut={x:0,touched:!1,pause:!1,lastCX:void 0,lastCY:void 0,bg:void 0,lastBg:void 0,overlay:!0,minimal:!0,scale:1,rotate:0};function gn(e){var t=e.loop,a=t===void 0?3:t,r=e.speed,o=e.easing,c=e.photoClosable,i=e.maskClosable,d=i===void 0||i,m=e.maskOpacity,v=m===void 0?1:m,g=e.pullClosable,p=g===void 0||g,P=e.bannerVisible,k=P===void 0||P,X=e.overlayRender,E=e.toolbarRender,l=e.className,y=e.maskClassName,j=e.photoClassName,Ue=e.photoWrapClassName,ye=e.loadingElement,ee=e.brokenElement,U=e.images,be=e.index,dt=be===void 0?0:be,x=e.onIndexChange,N=e.visible,He=e.onClose,Oe=e.afterClose,ft=e.portalContainer,ce=Pt(Ut),S=ce[0],T=ce[1],tt=u.useState(0),$=tt[0],vt=tt[1],Ce=S.x,nt=S.touched,rt=S.pause,Ye=S.lastCX,H=S.lastCY,se=S.bg,G=se===void 0?v:se,Mt=S.lastBg,Ee=S.overlay,K=S.minimal,Y=S.scale,ht=S.rotate,Be=S.onScale,Ae=S.onRotate,at=e.hasOwnProperty("index"),R=at?dt:$,mt=at?x:vt,te=u.useRef(R),Se=U.length,gt=U[R],Z=typeof a=="boolean"?a:Se>a,Xe=function(f,b){var _=u.useReducer(function(w){return!w},!1)[1],M=u.useRef(0),n=function(w){var ue=u.useRef(w);function de(O){ue.current=O}return u.useMemo(function(){(function(O){f?(O(f),M.current=1):M.current=2})(de)},[w]),[ue.current,de]}(f),s=n[1];return[n[0],M.current,function(){_(),M.current===2&&(s(!1),b&&b()),M.current=0}]}(N,Oe),ot=Xe[0],le=Xe[1],pt=Xe[2];At(function(){if(ot)return T({pause:!0,x:R*-(innerWidth+Qe)}),void(te.current=R);T(Ut)},[ot]);var it=Fe({close:function(f){Ae&&Ae(0),T({overlay:!0,lastBg:G}),He(f)},changeIndex:function(f,b){b===void 0&&(b=!1);var _=Z?te.current+(f-R):f,M=Se-1,n=Yt(_,0,M),s=Z?_:n,w=innerWidth+Qe;T({touched:!1,lastCX:void 0,lastCY:void 0,x:-w*s,pause:b}),te.current=s,mt&&mt(Z?f<0?M:f>M?0:f:n)}}),Re=it.close,ne=it.changeIndex;function Ne(f){return f?Re():T({overlay:!Ee})}function ct(){T({x:-(innerWidth+Qe)*R,lastCX:void 0,lastCY:void 0,pause:!0}),te.current=R}function wt(f,b,_,M){f==="x"?function(n){if(Ye!==void 0){var s=n-Ye,w=s;!Z&&(R===0&&s>0||R===Se-1&&s<0)&&(w=s/2),T({touched:!0,lastCX:Ye,x:-(innerWidth+Qe)*te.current+w,pause:!1})}else T({touched:!0,lastCX:n,x:Ce,pause:!1})}(b):f==="y"&&function(n,s){if(H!==void 0){var w=v===null?null:Yt(v,.01,v-Math.abs(n-H)/100/4);T({touched:!0,lastCY:H,bg:s===1?w:v,minimal:s===1})}else T({touched:!0,lastCY:n,bg:G,minimal:!0})}(_,M)}function xt(f,b){var _=f-(Ye??f),M=b-(H??b),n=!1;if(_<-40)ne(R+1);else if(_>40)ne(R-1);else{var s=-(innerWidth+Qe)*te.current;Math.abs(M)>100&&K&&p&&(n=!0,Re()),T({touched:!1,x:s,lastCX:void 0,lastCY:void 0,bg:v,overlay:!!n||Ee})}}et("keydown",function(f){if(N)switch(f.key){case"ArrowLeft":ne(R-1,!0);break;case"ArrowRight":ne(R+1,!0);break;case"Escape":Re()}});var yt=function(f,b,_){return u.useMemo(function(){var M=f.length;return _?f.concat(f).concat(f).slice(M+b-1,M+b+2):f.slice(Math.max(b-1,0),Math.min(b+2,M+1))},[f,b,_])}(U,R,Z);if(!ot)return null;var W=Ee&&!le,bt=N?G:Mt,ze=Be&&Ae&&{images:U,index:R,visible:N,onClose:Re,onIndexChange:ne,overlayVisible:W,overlay:gt&&gt.overlay,scale:Y,rotate:ht,onScale:Be,onRotate:Ae},qe=r?r(le):400,st=o?o(le):Wt,Ct=r?r(3):600,re=o?o(3):Wt;return h.createElement(nn,{className:"PhotoView-Portal"+(W?"":" PhotoView-Slider__clean")+(N?"":" PhotoView-Slider__willClose")+(l?" "+l:""),role:"dialog",onClick:function(f){return f.stopPropagation()},container:ft},N&&h.createElement(cn,null),h.createElement("div",{className:"PhotoView-Slider__Backdrop"+(y?" "+y:"")+(le===1?" PhotoView-Slider__fadeIn":le===2?" PhotoView-Slider__fadeOut":""),style:{background:bt?"rgba(0, 0, 0, "+bt+")":void 0,transitionTimingFunction:st,transitionDuration:(nt?0:qe)+"ms",animationDuration:qe+"ms"},onAnimationEnd:pt}),k&&h.createElement("div",{className:"PhotoView-Slider__BannerWrap"},h.createElement("div",{className:"PhotoView-Slider__Counter"},R+1," / ",Se),h.createElement("div",{className:"PhotoView-Slider__BannerRight"},E&&ze&&E(ze),h.createElement(rn,{className:"PhotoView-Slider__toolbarIcon",onClick:Re}))),yt.map(function(f,b){var _=Z||R!==0?te.current-1+b:R+b;return h.createElement(mn,{key:Z?f.key+"/"+f.src+"/"+_:f.key,item:f,speed:qe,easing:st,visible:N,onReachMove:wt,onReachUp:xt,onPhotoTap:function(){return Ne(c)},onMaskTap:function(){return Ne(d)},wrapClassName:Ue,className:j,style:{left:(innerWidth+Qe)*_+"px",transform:"translate3d("+Ce+"px, 0px, 0)",transition:nt||rt?void 0:"transform "+Ct+"ms "+re},loadingElement:ye,brokenElement:ee,onPhotoResize:ct,isActive:te.current===_,expose:T})}),!xe&&k&&h.createElement(h.Fragment,null,(Z||R!==0)&&h.createElement("div",{className:"PhotoView-Slider__ArrowLeft",onClick:function(){return ne(R-1,!0)}},h.createElement(an,null)),(Z||R+1<Se)&&h.createElement("div",{className:"PhotoView-Slider__ArrowRight",onClick:function(){return ne(R+1,!0)}},h.createElement(on,null))),X&&ze&&h.createElement("div",{className:"PhotoView-Slider__Overlay"},X(ze)))}var pn=["children","onIndexChange","onVisibleChange"],wn={images:[],visible:!1,index:0};function xn(e){var t=e.children,a=e.onIndexChange,r=e.onVisibleChange,o=kt(e,pn),c=Pt(wn),i=c[0],d=c[1],m=u.useRef(0),v=i.images,g=i.visible,p=i.index,P=Fe({nextId:function(){return m.current+=1},update:function(E){var l=v.findIndex(function(j){return j.key===E.key});if(l>-1){var y=v.slice();return y.splice(l,1,E),void d({images:y})}d(function(j){return{images:j.images.concat(E)}})},remove:function(E){d(function(l){var y=l.images.filter(function(j){return j.key!==E});return{images:y,index:Math.min(y.length-1,p)}})},show:function(E){var l=v.findIndex(function(y){return y.key===E});d({visible:!0,index:l}),r&&r(!0,l,i)}}),k=Fe({close:function(){d({visible:!1}),r&&r(!1,p,i)},changeIndex:function(E){d({index:E}),a&&a(E,i)}}),X=u.useMemo(function(){return I({},i,P)},[i,P]);return h.createElement(Ht.Provider,{value:X},t,h.createElement(gn,I({images:v,visible:g,index:p,onIndexChange:k.changeIndex,onClose:k.close},o)))}var yn=function(e){var t,a,r=e.src,o=e.render,c=e.overlay,i=e.width,d=e.height,m=e.triggers,v=m===void 0?["onClick"]:m,g=e.children,p=u.useContext(Ht),P=(t=function(){return p.nextId()},(a=u.useRef({sign:!1,fn:void 0}).current).sign||(a.sign=!0,a.fn=t()),a.fn),k=u.useRef(null);u.useImperativeHandle(g?.ref,function(){return k.current}),u.useEffect(function(){return function(){p.remove(P)}},[]);var X=Fe({render:function(l){return o&&o(l)},show:function(l,y){p.show(P),function(j,Ue){if(g){var ye=g.props[j];ye&&ye(Ue)}}(l,y)}}),E=u.useMemo(function(){var l={};return v.forEach(function(y){l[y]=X.show.bind(null,y)}),l},[]);return u.useEffect(function(){p.update({key:P,src:r,originRef:k,render:X.render,overlay:c,width:i,height:d})},[r]),g?u.Children.only(u.cloneElement(g,I({},E,{ref:k}))):null};const bn=(e,t=.8)=>new Promise((a,r)=>{const o=URL.createObjectURL(e),c=new Image;c.onload=()=>{const i=document.createElement("canvas");i.width=c.naturalWidth,i.height=c.naturalHeight,i.getContext("2d").drawImage(c,0,0),URL.revokeObjectURL(o),i.toBlob(m=>{if(!m)return r(new Error("Canvas to Blob conversion failed. Your browser may not support AVIF encoding."));const g=`${e.name.substring(0,e.name.lastIndexOf("."))||e.name}.avif`,p=new File([m],g,{type:"image/avif"});a(p)},"image/avif",t)},c.onerror=i=>{URL.revokeObjectURL(o),r(i)},c.src=o}),Nn=({label:e,files:t,setFiles:a,description:r,setDescription:o,maxFiles:c=5})=>{const[i,d]=u.useState(!1),[m,v]=u.useState(!1),g=u.useRef(null),p=async l=>{if(l&&l.length>0){const y=Array.from(l).slice(0,c-t.length);if(y.length===0)return;v(!0);try{const j=y.map(ee=>bn(ee)),ye=(await Promise.all(j)).map(ee=>({id:en(),file:ee,preview:URL.createObjectURL(ee),source:"new"}));a(ee=>[...ee,...ye])}catch(j){console.error("Failed to convert one or more images:",j),alert("An error occurred while converting an image to AVIF. Please try a different image or browser.")}finally{v(!1)}}},P=l=>{l.preventDefault(),l.stopPropagation(),d(["dragenter","dragover"].includes(l.type))},k=l=>{l.preventDefault(),l.stopPropagation(),d(!1),p(l.dataTransfer.files)},X=l=>{const y=t.find(j=>j.id===l);y?.preview&&URL.revokeObjectURL(y.preview),a(t.filter(j=>j.id!==l))},E=t.length>=c||m;return C.jsxs("div",{className:"space-y-4",children:[C.jsx("label",{className:"block text-sm font-semibold text-gray-800",children:e}),C.jsxs("div",{onDragEnter:P,onDragLeave:P,onDragOver:P,onDrop:k,onClick:()=>!E&&g.current?.click(),className:`relative flex flex-col items-center justify-center gap-2 border-2 border-dashed px-4 py-6 sm:px-6 sm:py-10 rounded-lg transition-all duration-300
      ${E?"cursor-not-allowed opacity-60":"cursor-pointer"}
      ${i?"border-orange-500 bg-orange-50":"border-gray-300 hover:border-orange-500 hover:bg-orange-50/50"}`,children:[m?C.jsx("p",{className:"text-sm font-semibold text-gray-600",children:"Converting images..."}):C.jsxs(C.Fragment,{children:[C.jsx(Gt,{className:"h-10 w-10 text-gray-400 group-hover:scale-105 transition"}),C.jsxs("p",{className:"text-sm text-center text-gray-700 leading-tight",children:[C.jsx("span",{className:"font-semibold text-orange-600",children:"Tap to upload"})," ","or drag and drop"]}),C.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF will be converted to AVIF"}),C.jsxs("p",{className:"text-xs text-gray-500",children:[t.length," / ",c," files added"]})]}),C.jsx("input",{ref:g,type:"file",multiple:!0,accept:"image/png, image/jpeg, image/gif, image/webp, image/avif",className:"hidden",onChange:l=>p(l.target.files),disabled:E})]}),t.length>0&&C.jsxs(C.Fragment,{children:[C.jsx(xn,{children:C.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3",children:t.map(l=>C.jsx(yn,{src:l.preview||l.url,children:C.jsxs("div",{className:"relative group overflow-hidden rounded-md border border-gray-200 shadow-sm hover:shadow-md transition-all cursor-zoom-in",children:[C.jsx("img",{src:l.preview||l.url,alt:"Preview",className:"w-full h-32 sm:h-40 object-cover"}),C.jsx("button",{type:"button",onClick:y=>{y.stopPropagation(),X(l.id)},className:"absolute top-1.5 right-1.5 bg-black/60 hover:bg-red-600 text-white rounded-full p-1 transition",children:C.jsx(qt,{className:"h-4 w-4"})})]})},l.id))})}),C.jsxs("div",{className:"mt-3",children:[C.jsxs("label",{htmlFor:`${e}-description`,className:"block text-sm font-medium text-gray-700 mb-1",children:["Description ",C.jsx("span",{className:"text-gray-400",children:"(optional)"})]}),C.jsx("input",{id:`${e}-description`,type:"text",placeholder:"Add a description...",value:r,onChange:l=>o(l.target.value),className:"w-full text-sm rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:ring-orange-500 focus:border-orange-500 transition"})]})]})]})};export{Nn as I,en as v};
