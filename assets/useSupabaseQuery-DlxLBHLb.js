import{r as re,b as v,e as Tt}from"./vendor-D0onPmP6.js";import{s as se}from"./index-BU3CQqfv.js";var ut={exports:{}},lt={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wt;function oe(){if(Wt)return lt;Wt=1;var t=re();function e(a,l){return a===l&&(a!==0||1/a===1/l)||a!==a&&l!==l}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,c=t.useLayoutEffect,s=t.useDebugValue;function u(a,l){var h=l(),D=r({inst:{value:h,getSnapshot:l}}),p=D[0].inst,N=D[1];return c(function(){p.value=h,p.getSnapshot=l,d(p)&&N({inst:p})},[a,h,l]),i(function(){return d(p)&&N({inst:p}),a(function(){d(p)&&N({inst:p})})},[a]),s(h),h}function d(a){var l=a.getSnapshot;a=a.value;try{var h=l();return!n(a,h)}catch{return!0}}function w(a,l){return l()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?w:u;return lt.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:m,lt}var jt;function ie(){return jt||(jt=1,ut.exports=oe()),ut.exports}var ae=ie();const Kt=0,Bt=1,zt=2,qt=3;var Mt=Object.prototype.hasOwnProperty;function St(t,e){var n,r;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&St(t[r],e[r]););return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if(Mt.call(t,n)&&++r&&!Mt.call(e,n)||!(n in e)||!St(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}const j=new WeakMap,M=()=>{},_=M(),Rt=Object,f=t=>t===_,x=t=>typeof t=="function",U=(t,e)=>({...t,...e}),Gt=t=>x(t.then),ft={},st={},_t="undefined",tt=typeof window!=_t,gt=typeof document!=_t,ce=tt&&"Deno"in window,ue=()=>tt&&typeof window.requestAnimationFrame!=_t,Jt=(t,e)=>{const n=j.get(t);return[()=>!f(e)&&t.get(e)||ft,r=>{if(!f(e)){const i=t.get(e);e in st||(st[e]=i),n[5](e,U(i,r),i||ft)}},n[6],()=>!f(e)&&e in st?st[e]:!f(e)&&t.get(e)||ft]};let vt=!0;const le=()=>vt,[wt,Ot]=tt&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[M,M],fe=()=>{const t=gt&&document.visibilityState;return f(t)||t!=="hidden"},de=t=>(gt&&document.addEventListener("visibilitychange",t),wt("focus",t),()=>{gt&&document.removeEventListener("visibilitychange",t),Ot("focus",t)}),he=t=>{const e=()=>{vt=!0,t()},n=()=>{vt=!1};return wt("online",e),wt("offline",n),()=>{Ot("online",e),Ot("offline",n)}},pe={isOnline:le,isVisible:fe},Ee={initFocus:de,initReconnect:he},Ut=!Tt.useId,Z=!tt||ce,me=t=>ue()?window.requestAnimationFrame(t):setTimeout(t,1),dt=Z?v.useEffect:v.useLayoutEffect,ht=typeof navigator<"u"&&navigator.connection,Ht=!Z&&ht&&(["slow-2g","2g"].includes(ht.effectiveType)||ht.saveData),ot=new WeakMap,Se=t=>Rt.prototype.toString.call(t),pt=(t,e)=>t===`[object ${e}]`;let Re=0;const yt=t=>{const e=typeof t,n=Se(t),r=pt(n,"Date"),i=pt(n,"RegExp"),c=pt(n,"Object");let s,u;if(Rt(t)===t&&!r&&!i){if(s=ot.get(t),s)return s;if(s=++Re+"~",ot.set(t,s),Array.isArray(t)){for(s="@",u=0;u<t.length;u++)s+=yt(t[u])+",";ot.set(t,s)}if(c){s="#";const d=Rt.keys(t).sort();for(;!f(u=d.pop());)f(t[u])||(s+=u+":"+yt(t[u])+",");ot.set(t,s)}}else s=r?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return s},Ct=t=>{if(x(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?yt(t):"",[t,e]};let ge=0;const Dt=()=>++ge;async function Yt(...t){const[e,n,r,i]=t,c=U({populateCache:!0,throwOnError:!0},typeof i=="boolean"?{revalidate:i}:i||{});let s=c.populateCache;const u=c.rollbackOnError;let d=c.optimisticData;const w=l=>typeof u=="function"?u(l):u!==!1,m=c.throwOnError;if(x(n)){const l=n,h=[],D=e.keys();for(const p of D)!/^\$(inf|sub)\$/.test(p)&&l(e.get(p)._k)&&h.push(p);return Promise.all(h.map(a))}return a(n);async function a(l){const[h]=Ct(l);if(!h)return;const[D,p]=Jt(e,h),[N,o,k,Y]=j.get(e),q=()=>{const C=N[h];return(x(c.revalidate)?c.revalidate(D().data,l):c.revalidate!==!1)&&(delete k[h],delete Y[h],C&&C[0])?C[0](zt).then(()=>D().data):D().data};if(t.length<3)return q();let T=r,F,L=!1;const g=Dt();o[h]=[g,0];const K=!f(d),V=D(),B=V.data,et=V._c,H=f(et)?B:et;if(K&&(d=x(d)?d(H,B):d,p({data:d,_c:H})),x(T))try{T=T(H)}catch(C){F=C,L=!0}if(T&&Gt(T))if(T=await T.catch(C=>{F=C,L=!0}),g!==o[h][0]){if(L)throw F;return T}else L&&K&&w(F)&&(s=!0,p({data:H,_c:_}));if(s&&!L)if(x(s)){const C=s(T,H);p({data:C,error:_,_c:_})}else p({data:T,error:_,_c:_});if(o[h][1]=Dt(),Promise.resolve(q()).then(()=>{p({_c:_})}),L){if(m)throw F;return}return T}}const $t=(t,e)=>{for(const n in t)t[n][0]&&t[n][0](e)},ve=(t,e)=>{if(!j.has(t)){const n=U(Ee,e),r=Object.create(null),i=Yt.bind(_,t);let c=M;const s=Object.create(null),u=(m,a)=>{const l=s[m]||[];return s[m]=l,l.push(a),()=>l.splice(l.indexOf(a),1)},d=(m,a,l)=>{t.set(m,a);const h=s[m];if(h)for(const D of h)D(a,l)},w=()=>{if(!j.has(t)&&(j.set(t,[r,Object.create(null),Object.create(null),Object.create(null),i,d,u]),!Z)){const m=n.initFocus(setTimeout.bind(_,$t.bind(_,r,Kt))),a=n.initReconnect(setTimeout.bind(_,$t.bind(_,r,Bt)));c=()=>{m&&m(),a&&a(),j.delete(t)}}};return w(),[t,i,w,c]}return[t,j.get(t)[4]]},we=(t,e,n,r,i)=>{const c=n.errorRetryCount,s=i.retryCount,u=~~((Math.random()+.5)*(1<<(s<8?s:8)))*n.errorRetryInterval;!f(c)&&s>c||setTimeout(r,u,i)},Oe=St,[Qt,ye]=ve(new Map),De=U({onLoadingSlow:M,onSuccess:M,onError:M,onErrorRetry:we,onDiscarded:M,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:Ht?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:Ht?5e3:3e3,compare:Oe,isPaused:()=>!1,cache:Qt,mutate:ye,fallback:{}},pe),Te=(t,e)=>{const n=U(t,e);if(e){const{use:r,fallback:i}=t,{use:c,fallback:s}=e;r&&c&&(n.use=r.concat(c)),i&&s&&(n.fallback=U(i,s))}return n},_e=v.createContext({}),Ce="$inf$",Xt=tt&&window.__SWR_DEVTOOLS_USE__,be=Xt?window.__SWR_DEVTOOLS_USE__:[],Ie=()=>{Xt&&(window.__SWR_DEVTOOLS_REACT__=Tt)},Ae=t=>x(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}],Le=()=>{const t=v.useContext(_e);return v.useMemo(()=>U(De,t),[t])},Ve=t=>(e,n,r)=>t(e,n&&((...c)=>{const[s]=Ct(e),[,,,u]=j.get(Qt);if(s.startsWith(Ce))return n(...c);const d=u[s];return f(d)?n(...c):(delete u[s],d)}),r),xe=be.concat(Ve),Ne=t=>function(...n){const r=Le(),[i,c,s]=Ae(n),u=Te(r,s);let d=t;const{use:w}=u,m=(w||[]).concat(xe);for(let a=m.length;a--;)d=m[a](d);return d(i,c||u.fetcher||null,u)},Fe=(t,e,n)=>{const r=e[t]||(e[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i>=0&&(r[i]=r[r.length-1],r.pop())}};Ie();const Et=Tt.use||(t=>{switch(t.status){case"pending":throw t;case"fulfilled":return t.value;case"rejected":throw t.reason;default:throw t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t}}),mt={dedupe:!0},kt=Promise.resolve(_),Pe=(t,e,n)=>{const{cache:r,compare:i,suspense:c,fallbackData:s,revalidateOnMount:u,revalidateIfStale:d,refreshInterval:w,refreshWhenHidden:m,refreshWhenOffline:a,keepPreviousData:l}=n,[h,D,p,N]=j.get(r),[o,k]=Ct(t),Y=v.useRef(!1),q=v.useRef(!1),T=v.useRef(o),F=v.useRef(e),L=v.useRef(n),g=()=>L.current,K=()=>g().isVisible()&&g().isOnline(),[V,B,et,H]=Jt(r,o),C=v.useRef({}).current,Q=f(s)?f(n.fallback)?_:n.fallback[o]:s,bt=(E,R)=>{for(const O in C){const S=O;if(S==="data"){if(!i(E[S],R[S])&&(!f(E[S])||!i(rt,R[S])))return!1}else if(R[S]!==E[S])return!1}return!0},It=v.useMemo(()=>{const E=!o||!e?!1:f(u)?g().isPaused()||c?!1:d!==!1:u,R=b=>{const P=U(b);return delete P._k,E?{isValidating:!0,isLoading:!0,...P}:P},O=V(),S=H(),A=R(O),J=O===S?A:R(S);let y=A;return[()=>{const b=R(V());return bt(b,y)?(y.data=b.data,y.isLoading=b.isLoading,y.isValidating=b.isValidating,y.error=b.error,y):(y=b,b)},()=>J]},[r,o]),z=ae.useSyncExternalStore(v.useCallback(E=>et(o,(R,O)=>{bt(O,R)||E()}),[r,o]),It[0],It[1]),At=!Y.current,Zt=h[o]&&h[o].length>0,G=z.data,$=f(G)?Q&&Gt(Q)?Et(Q):Q:G,nt=z.error,it=v.useRef($),rt=l?f(G)?f(it.current)?$:it.current:G:$,Lt=Zt&&!f(nt)?!1:At&&!f(u)?u:g().isPaused()?!1:c?f($)?!1:d:f($)||d,Vt=!!(o&&e&&At&&Lt),te=f(z.isValidating)?Vt:z.isValidating,ee=f(z.isLoading)?Vt:z.isLoading,X=v.useCallback(async E=>{const R=F.current;if(!o||!R||q.current||g().isPaused())return!1;let O,S,A=!0;const J=E||{},y=!p[o]||!J.dedupe,b=()=>Ut?!q.current&&o===T.current&&Y.current:o===T.current,P={isValidating:!1,isLoading:!1},Nt=()=>{B(P)},Ft=()=>{const I=p[o];I&&I[1]===S&&delete p[o]},Pt={isValidating:!0};f(V().data)&&(Pt.isLoading=!0);try{if(y&&(B(Pt),n.loadingTimeout&&f(V().data)&&setTimeout(()=>{A&&b()&&g().onLoadingSlow(o,n)},n.loadingTimeout),p[o]=[R(k),Dt()]),[O,S]=p[o],O=await O,y&&setTimeout(Ft,n.dedupingInterval),!p[o]||p[o][1]!==S)return y&&b()&&g().onDiscarded(o),!1;P.error=_;const I=D[o];if(!f(I)&&(S<=I[0]||S<=I[1]||I[1]===0))return Nt(),y&&b()&&g().onDiscarded(o),!1;const W=V().data;P.data=i(W,O)?W:O,y&&b()&&g().onSuccess(O,o,n)}catch(I){Ft();const W=g(),{shouldRetryOnError:at}=W;W.isPaused()||(P.error=I,y&&b()&&(W.onError(I,o,W),(at===!0||x(at)&&at(I))&&(!g().revalidateOnFocus||!g().revalidateOnReconnect||K())&&W.onErrorRetry(I,o,W,ne=>{const ct=h[o];ct&&ct[0]&&ct[0](qt,ne)},{retryCount:(J.retryCount||0)+1,dedupe:!0})))}return A=!1,Nt(),!0},[o,r]),xt=v.useCallback((...E)=>Yt(r,T.current,...E),[]);if(dt(()=>{F.current=e,L.current=n,f(G)||(it.current=G)}),dt(()=>{if(!o)return;const E=X.bind(_,mt);let R=0;g().revalidateOnFocus&&(R=Date.now()+g().focusThrottleInterval);const S=Fe(o,h,(A,J={})=>{if(A==Kt){const y=Date.now();g().revalidateOnFocus&&y>R&&K()&&(R=y+g().focusThrottleInterval,E())}else if(A==Bt)g().revalidateOnReconnect&&K()&&E();else{if(A==zt)return X();if(A==qt)return X(J)}});return q.current=!1,T.current=o,Y.current=!0,B({_k:k}),Lt&&(p[o]||(f($)||Z?E():me(E))),()=>{q.current=!0,S()}},[o]),dt(()=>{let E;function R(){const S=x(w)?w(V().data):w;S&&E!==-1&&(E=setTimeout(O,S))}function O(){!V().error&&(m||g().isVisible())&&(a||g().isOnline())?X(mt).then(R):R()}return R(),()=>{E&&(clearTimeout(E),E=-1)}},[w,m,a,o]),v.useDebugValue(rt),c){const E=o&&f($);if(!Ut&&Z&&E)throw new Error("Fallback data is required when using Suspense in SSR.");E&&(F.current=e,L.current=n,q.current=!1);const R=N[o],O=!f(R)&&E?xt(R):kt;if(Et(O),!f(nt)&&E)throw nt;const S=E?X(mt):kt;!f(rt)&&E&&(S.status="fulfilled",S.value=!0),Et(S)}return{mutate:xt,get data(){return C.data=!0,rt},get error(){return C.error=!0,nt},get isValidating(){return C.isValidating=!0,te},get isLoading(){return C.isLoading=!0,ee}}},We=Ne(Pe),je=async({tableName:t,selectQuery:e,page:n,searchTerm:r,searchColumn:i,pageSize:c})=>{const s=(n-1)*c,u=s+c-1;let d=se.from(t).select(e,{count:"exact"});r&&i&&(d=d.ilike(i,`%${r}%`));const{data:w,error:m,count:a}=await d.order("created_at",{ascending:!1}).range(s,u);if(m)throw console.error("SWR Fetcher Error:",m),new Error(m.message||"Could not fetch data.");return{data:w,count:a}},He=({tableName:t,selectQuery:e="*",searchColumn:n,initialPageSize:r=5})=>{const[i]=v.useState(r),[c,s]=v.useState(1),[u,d]=v.useState(""),[w,m]=v.useState(""),a={tableName:t,selectQuery:e,page:c,searchTerm:w,searchColumn:n,pageSize:i},{data:l,error:h,isLoading:D,mutate:p}=We(a,je,{keepPreviousData:!0,revalidateOnFocus:!1,revalidateOnReconnect:!1,revalidateIfStale:!1,dedupingInterval:1/0}),N=k=>{k?.preventDefault(),s(1),m(u)},o=()=>{d(""),m(""),c!==1&&s(1)};return{data:l?.data||[],totalCount:l?.count||0,isLoading:D,error:h,mutate:p,currentPage:c,setCurrentPage:s,pageCount:Math.ceil((l?.count||0)/i),pageSize:i,searchTerm:u,setSearchTerm:d,activeSearchTerm:w,handleSearch:N,clearSearch:o}};export{We as a,He as u};
